<?xml version="1.0" encoding="UTF-8"?>
<assembly xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="SeamAssembly.xsd">
  <variables>
    <variable id="v1" />
    <variable id="v2" />
  </variables>
  <seams>
    <seam id="s1">	
      <blockref block="b1" />
      <blockref block="b2" />
      <CompleteCondition>
          <And>
              <variableref id="v1" />
          </And>
      </CompleteCondition>
      <!-- I'm not sure about this expression. What we realy mean is that a
      seam is realized by a sequence of operation i.e. a SOP. This is why I
      think it will be a little bit complicated to handle the flagging approach.
      What the flaggins mean is that the seam neads to be realized in a specific way.
      So I still think that our approach in the sequence planner way is easier
      where a seam is a simple two state thing (complete, not complete) and that
      more specific information is described by a SOP (e.g. rotate, move, engage)
      The seam is complete when the SOP is complete.-->
      
      <!-- My suggestion is
        <Realizer SOP=spec17 />
        Then we have a little bit the same structure as the resources where 
        we have an operation structure connected with a specific seamtype (as 
        we have abilities on the resources... This could ofcource be matched in the 
        workbench
      -->
    </seam>
    <seam id="s2">
      <blockref block="b2" />
      <blockref block="b3" />
      <CompleteCondition>
          <And>
              <variableref id="v2" />
          </And>
      </CompleteCondition>
    </seam>
  </seams>
  <blocks>
    <block id="b1" name="Tank" />
    <block id="b2" name="Body">
      <capacity name="mass" value="20000.0" unit="kilogram" var="v1" />
    </block>
    <block id="b3" name="Turret">
      <capacity name="mass" value="400.0" unit="kilogram" var="v2" />
    </block>
  </blocks>
  <resources>
    <resource id="r1" name="Gantry" type="Crane" />
    <resource id="r2" name="Stationary GlueGun" type="GlueGun" />
    <resource id="r3" name="Mobile GlueGun" type="GlueGun" />
  </resources>
  <operations>
    <operation id="o1" type="GlueBlocks" resource="r3" seam="s1">
      <timeCost value="400.0" unit="second" />
      <!-- I do not think we need absolute time here. Absolute time is probably only 
      used in conditions for example by using a StartAT: 10.00, precondition -->
      <postaction>
        <Assign>
          <variableref id="v1" />
          <double value="1.0" />
        </Assign>
      </postaction>
    </operation>
    <operation id="o2" type="MoveToBlock" resource="r1" />
      <timeCost value="400.0" unit="second" />
      <precondition>
        <Eq>
          <variableref id="v1"  />
          <double value="1.0" />
        </Eq>
      </precondition>
      <postaction>
        <Assign>
          <variableref id="v2" />
          <double value="1.0" />
        </Assign>
      </postaction>
    <operation id="o3" type="LiftBlock" resource="r1">
        <timeCost value="400.0" unit="second" />
        <postaction>
            <Assign>
                <variableref id="v2" />
                <double value="1.0" />
            </Assign>
        </postaction>
    </operation>
  </operations>
  
  <specs>
    <spec>
      <alternative>
        <opref id="o2" />
        <opref id="o3" />
      </alternative>
    </spec>
   </specs>

</assembly>